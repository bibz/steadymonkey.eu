<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Upgrading my NAS to TrueNAS Core</title>
	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link rel="stylesheet" type="text/css" href="/assets/css/style.css?v=a17a7e1305" />

	<script>
			var siteUrl = 'https://steadymonkey.eu';
	</script>

	<script>
			var localTheme = localStorage.getItem('attila_theme');
			switch (localTheme) {
					case 'dark':
							document.documentElement.classList.add('theme-dark');
							break;
					case 'light':
							document.documentElement.classList.add('theme-light');
							break;
					default:
							break;
			}
	</script>



			<style>
				.theme-dark:root {
				  --ghost-accent-color: #b6a800;
				}
				@media (prefers-color-scheme: dark) {
				  html:not(.theme-light):root {
				    --ghost-accent-color: #b6a800;
				  }
				}
			</style>

	<link rel="canonical" href="https://steadymonkey.eu/upgrading-my-nas-to-truenas-core/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://steadymonkey.eu/upgrading-my-nas-to-truenas-core/amp/" />
    
    <meta property="og:site_name" content="Steady Monkey" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Upgrading my NAS to TrueNAS Core" />
    <meta property="og:description" content="Over the course of the week-end, I (finally) upgraded from FreeNAS 11.3 to TrueNAS Core 12.0. One of the most notable things with the new version is that it is strongly discouraged to use a USB stick as boot drive. Since my NAS has an internal USB port" />
    <meta property="og:url" content="https://steadymonkey.eu/upgrading-my-nas-to-truenas-core/" />
    <meta property="article:published_time" content="2021-10-24T19:23:26.000Z" />
    <meta property="article:modified_time" content="2021-10-24T19:23:26.000Z" />
    <meta property="article:tag" content="Homelab" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Upgrading my NAS to TrueNAS Core" />
    <meta name="twitter:description" content="Over the course of the week-end, I (finally) upgraded from FreeNAS 11.3 to TrueNAS Core 12.0. One of the most notable things with the new version is that it is strongly discouraged to use a USB stick as boot drive. Since my NAS has an internal USB port" />
    <meta name="twitter:url" content="https://steadymonkey.eu/upgrading-my-nas-to-truenas-core/" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Borjan Tchakaloff" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Homelab" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Steady Monkey",
        "url": "https://steadymonkey.eu/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://steadymonkey.eu/favicon.ico"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Borjan Tchakaloff",
        "url": "https://steadymonkey.eu/author/borjan/",
        "sameAs": []
    },
    "headline": "Upgrading my NAS to TrueNAS Core",
    "url": "https://steadymonkey.eu/upgrading-my-nas-to-truenas-core/",
    "datePublished": "2021-10-24T19:23:26.000Z",
    "dateModified": "2021-10-24T19:23:26.000Z",
    "keywords": "Homelab",
    "description": "Over the course of the week-end, I (finally) upgraded from FreeNAS 11.3 to\nTrueNAS Core 12.0.\n\nOne of the most notable things with the new version is that it is strongly\ndiscouraged to use a USB stick as boot drive. Since my NAS has an internal USB\nport for a boot stick, it is of course what I have been using since the\nbeginning: a very small SanDisk Cruzer Fit of 16GB. Good opportunity to use that\nold (but unused) Intel SSD of 40GB that has been forgotten in the unnamed box of\nelectronics.\n\nMy ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://steadymonkey.eu/"
    }
}
    </script>

    <meta name="generator" content="Ghost 4.48" />
    <link rel="alternate" type="application/rss+xml" title="Steady Monkey" href="https://steadymonkey.eu/rss.xml" />
    
    <script defer src="/public/cards.min.js?v=a17a7e1305"></script>
    <link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=a17a7e1305">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-solarizedlight.min.css" integrity="sha512-fibfhB71IpdEKqLKXP/96WuX1cTMmvZioYp7T6I+lTbvJrrjEGeyYdAf09GHpFptF8toQ32woGZ8bw9+HjZc0A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/line-numbers/prism-line-numbers.min.css" integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://esm.sh/emfed@1/toots.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    :root {--ghost-accent-color: #b6a800;}
    /* Quick hack to reset conflicting styles. */
    .post-content .toots a, .post-content .toots a:hover, .post-content .toots a:focus {
        box-shadow: none;
    }
    .post-content .toots .body a {
        box-shadow: inset 0 -2px 0 var(--ghost-accent-color);
    }
    .post-content .toots .body a:hover,.post-content .toots .body a:focus  {
        box-shadow: inset 0 -3px 0 var(--ghost-accent-color);
    }
</style>
<link rel="me" href="https://freiburg.social/@docbibi" /><style>:root {--ghost-accent-color: #b6a800;}</style>
</head>

<body class="post-template tag-homelab">

	<div class="nav-header">
		<nav class="nav-wrapper" aria-label="Main">
				<ul>
		<li class="nav-home"><a href="https://steadymonkey.eu/"><span>Home</span></a></li>
		<li class="nav-atreus"><a href="https://steadymonkey.eu/tag/atreus/"><span>Atreus</span></a></li>
		<li class="nav-homelab"><a href="https://steadymonkey.eu/tag/homelab/"><span>Homelab</span></a></li>
		<li class="nav-mainboard"><a href="https://steadymonkey.eu/tag/mainboard/"><span>Mainboard</span></a></li>
		<li class="nav-python"><a href="https://steadymonkey.eu/tag/python/"><span>Python</span></a></li>
		<li class="nav-random-bits"><a href="https://steadymonkey.eu/tag/thoughts/"><span>Random bits</span></a></li>
		<li class="nav-services"><a href="https://steadymonkey.eu/services/"><span>Services</span></a></li>
</ul>

				<ul class="nav-meta">
  <li class="nav-search">
    <a title="Search" data-ghost-search>
      <i class="icon icon-search" aria-hidden="true"></i>
      <span>Search</span>
    </a>
  </li>
</ul>
		</nav>

		<div class="nav-wrapper-control">
			<div class="inner">
				<a class="nav-menu" role="button"><i class="icon icon-menu" aria-hidden="true"></i>Menu</a>
				<a class="nav-search" title="Search" role="button" data-ghost-search><i class="icon icon-search" aria-hidden="true"></i></a>
			</div>
		</div>
	</div>
	<div class="nav-close" role="button" aria-label="Close"></div>

	<section class="page-wrapper">

		

<div class="progress-container">
	<span class="progress-bar"></span>
</div>

<header class="post-header ">
	<div class="inner">
		<span class="post-info">
			<span class="post-type">Article</span>
			<span class="post-count">Homelab</span>
		</span>
		<h1 class="post-title">Upgrading my NAS to TrueNAS Core</h1>
		<div class="post-meta">
			<div class="post-meta-avatars">
					<figure class="post-meta-avatar avatar">
					</figure>
			</div>
			<h4 class="post-meta-author"><a href="/author/borjan/">Borjan Tchakaloff</a></h4>
			<time datetime="24-10-2021">24 Oct 2021</time> &bull; 1 min read
		</div>
	</div>
</header>

<main class="content" role="main">
	<article class="post tag-homelab no-image">
		<div class="inner">

			<section class="post-content">
				<p>Over the course of the week-end, I (finally) upgraded from FreeNAS 11.3 to TrueNAS Core 12.0.</p><p>One of the most notable things with the new version is that it is strongly discouraged to use a USB stick as boot drive. Since my NAS has an internal USB port for a boot stick, it is of course what I have been using since the beginning: a very small SanDisk Cruzer Fit of 16GB. Good opportunity to use that old (but unused) Intel SSD of 40GB that has been forgotten in the unnamed box of electronics.</p><p>My initial thought was to unplug everything from the motherboard, the data hard drives, the boot USB stick, the ethernet cable, and install TrueNAS on the SSD. Not only is that a bit on the paranoid side, it is also completely unnecessary. It turns out plugging in the SSD and adding it to the ZFS boot pool was enough to seamlessly upgrade my boot storage to a two-disk mirror. As a side-effect, my boot pool is limited by the smaller disk but I now have a <em>mirrored</em> boot pool. Yay for redundancy. 16GB is enough for now anyway, the main disk space use is on OS upgrade to create a new boot environment. That does not happen so often to me (sic).</p><p>It is worth noting that the NAS do have a fifth SATA port, for the optional ODD (Optical Disk Drive). I decided to flash the BIOS with a well-known community mod to allow disabling the IDE mode on this fifth port, thus allowing the full SATA-3Gbps bandwidth.</p><p>If the USB stick comes to fail, I will still be able to boot the NAS from the SSD (which is the boot drive anyway). When that happens, I might get a USB-to-SATA adapter and fit another small SSD somewhere in the NAS enclosure to keep the mirrored boot pool.</p><p>Back to the upgrade: booting off a USB stick with TrueNAS Core 12.0 and selecting the "upgrade" process went as smooth as can be expected. And… that's it, the NAS is up-to-date now. I am still impressed by how little maintenance is actually needed for FreeNAS/TrueNAS. Setting things up do take some time, though.</p>
			</section>

			<section class="post-footer">

				<aside class="post-tags">
					<span class="post-info-label">Topic</span>
					<a href="/tag/homelab/">Homelab</a>
				</aside>

			</section>




			<aside class="post-nav">

					<a class="post-nav-next" href="/more-adventures-with-the-nas/">
						<section class="post-nav-teaser">
							<i class="icon icon-arrow-left" aria-label="Next post"></i>
							<h2 class="post-nav-title">More adventures with the NAS</h2>
							<p class="post-nav-excerpt">About ten days ago, I received a scary e-mail from the NAS (it has a name by the way, it's called cactus): my boot pool was degraded but still operational. The SSD I added not so long ago to mirror the USB drive actually started to fail.&hellip;</p>
							<p class="post-nav-meta"><time datetime="17-11-2021">17 Nov 2021</time></p>
						</section>
					</a>

					<a class="post-nav-prev" href="/refreshing-my-nas-configuration/">
						<section class="post-nav-teaser">
							<i class="icon icon-arrow-right" aria-label="Previous post"></i>
							<h2 class="post-nav-title">Refreshing my NAS configuration</h2>
							<p class="post-nav-excerpt">I setup my Network Attached Storage (NAS) back in 2014 after getting&hellip;</p>
							<p class="post-nav-meta"><time datetime="28-08-2021">28 Aug 2021</time></p>
						</section>
					</a>
				<div class="clear"></div>
			</aside>

		</div>
	</article>
</main>




		<div class="nav-footer">
			<nav class="nav-wrapper" aria-label="Footer">
				<span class="nav-copy">Steady Monkey &copy; 2024  <a class="nav-rss" title="RSS" href="https://steadymonkey.eu/rss.xml" target="_blank"><i class="icon icon-rss" aria-hidden="true"></i></a></span>
				<ul>
		<li class="nav-docbibi-freiburg-social"><a href="https://freiburg.social/@docbibi"><span>@docbibi@freiburg.social</span></a></li>
		<li class="nav-docbibi-sourcehut"><a href="https://git.sr.ht/~docbibi/"><span>docbibi (SourceHut)</span></a></li>
		<li class="nav-bibz-github"><a href="https://github.com/bibz"><span>bibz (GitHub)</span></a></li>
</ul>

				<span class="nav-credits">Published with <a href="https://ghost.org">Ghost</a> &bull; Theme <a href="https://github.com/zutrinken/attila">Attila</a> &bull; <a class="menu-item js-theme" href="#" data-system="System theme" data-dark="Dark theme" data-light="Light theme"><span class="theme-icon"></span><span class="theme-text">System theme</span> </a> </span>
			</nav>
		</div>

	</section>

	<script type="text/javascript" src="/assets/js/script.js?v=a17a7e1305"></script>

	<script>
  $(document).ready(function () {
		var viewport = $(window);
		var post = $('.post-content');
		// Responsive videos with fitVids
    post.fitVids();
		// Format code blocks and add line numbers
		function codestyling() {
	    $('pre code').each(function(i, e) {
				// Code highlight
	      hljs.highlightElement(e);
	      // No lines for plain text blocks
	      if (!$(this).hasClass('language-text')) {
	        var code = $(this);
					// Calculate amount of lines
	        var lines = code.html().split(/\n(?!$)/g).length;
	        var numbers = [];
	        if (lines > 1) {
	          lines++;
	        }
	        for (i = 1; i < lines; i++) {
	          numbers += '<span class="line" aria-hidden="true">' + i + '</span>';
	        }
	        code.parent().append('<div class="lines">' + numbers + '</div>');
	      }
	    });
	  }
	  codestyling();
		// Reading progress bar on window top
	  function readingProgress() {
			var postBottom = post.offset().top + post.height();
			var viewportHeight = viewport.height();
      var progress = 100 - (((postBottom - (viewport.scrollTop() + viewportHeight) + viewportHeight / 3) / (postBottom - viewportHeight + viewportHeight / 3)) * 100);
      $('.progress-bar').css('width', progress + '%');
      (progress > 100) ? $('.progress-container').addClass('complete'): $('.progress-container').removeClass('complete');
	  }
	  readingProgress();
		// Trigger reading progress
	  viewport.on({
	    'scroll': function() {
	      readingProgress();
	    },
	    'resize': function() {
	      readingProgress();
	    },
	    'orientationchange': function() {
	      readingProgress();
	    }
	  });

  });
</script>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-python.min.js" integrity="sha512-yIpe1UXrH/ZWwu3n7MdHNfMbPXftP0jlg9+lRhzlpbolElt33h3PGx9ICzqf/k+yca3QNzqcO3sdtKJuYRTi4g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="module" src="https://esm.sh/emfed@1" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</body>
</html>
